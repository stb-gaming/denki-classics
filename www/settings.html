<h2>Games Folders</h2>
<form id="yes">

	<input type="text" name="a" id="b">
	<button type="submit">

</form>

<h2>Games</h2>


<script>

	/**
	 * @param form {HTMLFormElement}
	 */
	function getFormData(form) {
		return Array.from(form.querySelectorAll("input select")).reduce((obj, { name, value }) => {
			obj[name] = value;
			return obj;
		}, {});
	}
	function getFormDataAlt(form) {
		return Array.from(new FormData(form).entries()).reduce((obj, [k, v]) => {
			obj[k] = v;
		}, {});
	}

	function setFormData(form, data) {
		for (const child of Array.from(form.querySelectorAll("input select"))) {
			child.value = data[child.name];
		}
	}

	let form = document.getElementById("yes");
	function loadSettings(settings) {
		// put stuff into form
		setFormData(form, settings);


	}
	SkyGames.loadSettings().then(loadSettings);


	/**
	 * @param e {SubmitEvent}
	 */
	async function saveSettings(e) {
		e.preventDefault();

		///TODO: get form fields
		let setings = getFormData(e.target);

		try {
			await SkyGames.saveSettings(settings);

		} catch (error) {
			if (error) {
				alert("There was an error, see console, for more info");
				console.error(error);
				return;
			}
		}

		location.href = "index.html";
	}

	form.addEventListener("submit", saveSettings)
</script>
